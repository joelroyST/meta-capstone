// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              Int      @id @default(autoincrement())
  name            String
  email           String?  @unique
  facebookId      String   @unique
  provider        String
  favoriteTeams   Team[]
  favoritePlayers Player[]
  leagues         League[]
}

model Team {
  teamId   String   @id // This is from the id the api assigns
  players  Player[] @relation(fields: [teamId], references: [playerId])
  city     String
  nickName String
  confName String
  User     User[]
}

model PlayerStatisticsPerGame {
  id            Int    @id @default(autoincrement())
  gameId        String
  teamId        String
  points        Int
  position      String
  minPlayed     String
  fgm           Int
  fga           Float
  ftm           Int
  fta           Int
  ftp           Float
  tpm           Int
  tpa           Int
  tpp           Float
  offReb        Int
  debReb        Int
  totReb        Int
  assists       Int
  personalFouls Int
  steals        Int
  turnovers     Int
  blocks        Int
  plusMinus     Int
  playerId      Int
}

model FantasyTeam {
  userId       Int
  leagueId     Int
  name         String
  players      Player[]

  @@id([userId, leagueId])
}

model League {
  leagueId Int    @id
  name     String
  users    User[]
}

model Transactions {
  id               Int         @id @default(autoincrement())
  playersFromTeamA Int[]
  playersFromTeamB Int[]
  fantasyTeamA     FantasyTeam 
  userA            Int
  leagueA          Int
  fantasyTeamB     FantasyTeam 
  userB            Int
  leagueB          Int
  transactionType  String
  status           String
}

model Player {
  playerId       Int           @id
  teamId         Int
  firstName      String
  lastName       String
  teams          Team[]
  fantasyTeams   FantasyTeam[]
  User           User[]
  value          Int
}

// FantasyTeam @relation("FantasyTeamA", fields: [fantasyTeamAUserId, fantasyTeamALeagueId], references: [userId,leagueId])
